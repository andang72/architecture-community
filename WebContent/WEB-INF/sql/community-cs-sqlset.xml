<?xml version="1.0" encoding="UTF-8"?>
<sqlset>
	<name>COMMUNITY_CS</name>
	<description>COMMUNITY SERVICE SUBSYSTEM QUERIES</description>	

	<!--  ====================================  -->
	<!-- 	PROJECTS & ISSUES      	 		   -->
	<!--  ====================================  -->
	<!--  PROJECTS							   -->
	
	<!--  ISSUES								   -->
	
	<!--  ====================================  -->
	<!-- 	IMAGES AND ATTACHMENTS  	 		   -->
	<!--  ====================================  -->
	<!--  IMAGES								   -->
    	<sql-query name="COUNT_IMAGE_BY_REQUEST" description="COUNT_IMAGE_BY_REQUEST"><![CDATA[
	SELECT  
		COUNT(IMAGE_ID)      	
	FROM REP_IMAGE
	]]><dynamic><![CDATA[    
    ]]></dynamic></sql-query>	
    	
    	<sql-query name="SELECT_IMAGE_IDS_BY_REQUEST" description="SELECT_IMAGE_IDS_BY_REQUEST"><![CDATA[
	SELECT  
		IMAGE_ID      	
	FROM REP_IMAGE
	]]><dynamic><![CDATA[    
	<#if sort??  && ( sort?size > 0 ) > ORDER BY <#list sort as item > ${item.field} ${item.dir} </#list></#if>
    ]]></dynamic></sql-query>
    
    	<sql-query name="UPDATE_IMAGE_OBJECT_TYPE_AND_OBJECT_ID" description="UPDATE_IMAGE_OBJECT_TYPE_AND_OBJECT_ID"><![CDATA[
  	UPDATE REP_IMAGE SET
	  	OBJECT_TYPE = ?,
		OBJECT_ID = ?
	WHERE IMAGE_ID = ?
    ]]></sql-query>
            
	<!--  ATTACHMENTS						   -->
	
	<!--  ====================================  -->
	<!-- 	ANNOUNCE			      	 		   -->
	<!--  ====================================  -->
	
	<sql-query name="SELECT_ANNOUNCE_BY_ID" description="SELECT_ANNOUNCE_BY_ID"><![CDATA[
	SELECT 
		ANNOUNCE_ID,
		OBJECT_TYPE,
		OBJECT_ID, 		
		USER_ID,	 		
		SUBJECT,
		BODY,
		START_DATE,
		END_DATE,
		STATUS,
		CREATION_DATE,
		MODIFIED_DATE
	FROM AC_ANNOUNCE
	WHERE ANNOUNCE_ID = ?
	]]></sql-query>
	
	<sql-query name="UPDATE_ANNOUNCE" description="UPDATE_ANNOUNCE"><![CDATA[
 	UPDATE AC_ANNOUNCE SET 		
		SUBJECT = ?,
		BODY = ?,
	  	START_DATE = ?,
	  	END_DATE = ?,
		MODIFIED_DATE = ?
	WHERE ANNOUNCE_ID = ?	
	]]></sql-query>
	
	<sql-query name="INSERT_ANNOUNCE" description="INSERT ANNOUNCE"><![CDATA[
    INSERT INTO AC_ANNOUNCE (
		ANNOUNCE_ID,
		OBJECT_TYPE,
		OBJECT_ID, 		
		USER_ID,	 		
		SUBJECT,
		BODY,
		START_DATE,
		END_DATE,
		STATUS,
		CREATION_DATE,
		MODIFIED_DATE
	) VALUES ( ?,?,?,?,?,?,?,?,0,?,? )    	
	]]></sql-query>
	
	<sql-query name="DELETE_ANNOUNCE" description="DELETE_ANNOUNCE"><![CDATA[
	DELETE FROM AC_ANNOUNCE WHERE ANNOUNCE_ID = ?
	]]></sql-query>		
		
	<sql-query name="SELECT_ANNOUNCE_IDS_BY_USER_ID" description="SELECT_ANNOUNCE_IDS_BY_USER_ID"><![CDATA[
	SELECT ANNOUNCE_ID FROM AC_ANNOUNCE WHERE USER_ID = ? 
	order by MODIFIED_DATE desc
	]]></sql-query>		
	
	<sql-query name="SELECT_ANNOUNCE_IDS_BY_OBJECT_TYPE_AND_OBJECT_ID" description="SELECT_ANNOUNCE_IDS_BY_OBJECT_TYPE_AND_OBJECT_ID"><![CDATA[
	SELECT ANNOUNCE_ID FROM AC_ANNOUNCE WHERE OBJECT_TYPE = ? AND OBJECT_ID = ?
	order by MODIFIED_DATE desc
	]]></sql-query>		
	
	<sql-query name="SELECT_ALL_ANNOUNCE_IDS" description="SELECT_ALL_ANNOUNCE_IDS"><![CDATA[
	SELECT ANNOUNCE_ID FROM AC_ANNOUNCE 
	order by MODIFIED_DATE desc
	]]></sql-query>			
    	        	
</sqlset>